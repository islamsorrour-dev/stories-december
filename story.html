<!DOCTYPE html>
<html lang="ar" dir="rtl">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>القصة التربوية</title>
    <link rel="stylesheet" href="story-style.css">
    <link href="https://fonts.googleapis.com/css2?family=Cairo:wght@400;600;700;800&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
</head>

<body>
    <!-- Audio Files - سيتم إنشاؤها ديناميكياً -->
    <div id="audioContainer"></div>

    <!-- زر العودة للقائمة -->
    <button class="back-to-list-btn" onclick="goBackToList()" title="العودة للقائمة">
        <i class="fas fa-arrow-right"></i>
    </button>

    <!-- صفحة البداية -->
    <div id="intro-page" class="intro-page active">
        <div class="story-card">
            <div class="story-header">
                <h1 class="story-title" id="storyTitle">القصة</h1>
                <div class="story-icon">
                    <i class="fas fa-book" id="storyIcon"></i>
                </div>
            </div>
            <div class="story-description">
                <p id="storyDescription">قصة تربوية تعليمية</p>
                <div class="story-info">
                    <span><i class="fas fa-clock"></i> <span id="storyDuration">5</span> دقائق</span>
                    <span><i class="fas fa-book"></i> <span id="storyPages">10</span> صفحات</span>
                    <span><i class="fas fa-users"></i> <span id="storyAge">3-5</span> سنوات</span>
                </div>
            </div>

            <!-- خيار الصوت -->
            <div class="audio-option">
                <label class="audio-toggle">
                    <input type="checkbox" id="audio-checkbox">
                    <span class="audio-label">
                        <i class="fas fa-volume-up"></i>
                        تشغيل الصوت مع القصة
                    </span>
                </label>
            </div>

            <button class="btn-start" onclick="startStory()">
                <i class="fas fa-play"></i>
                ابدأ القصة
            </button>
        </div>
    </div>

    <!-- صفحة الكتاب -->
    <div id="book-page" class="book-page">
        <!-- زر التحكم بالصوت -->
        <button class="audio-control" id="audioControlBtn" onclick="toggleAudio()">
            <i class="fas fa-volume-up" id="audioIcon"></i>
        </button>

        <div class="book-container">
            <button class="nav-btn prev-btn" onclick="prevPage()" id="prevBtn">
                <i class="fas fa-chevron-right"></i>
            </button>

            <div class="book" id="bookContent">
                <!-- سيتم ملء الصفحات ديناميكياً -->
            </div>

            <button class="nav-btn next-btn" onclick="nextPage()" id="nextBtn">
                <i class="fas fa-chevron-left"></i>
            </button>
        </div>

        <div class="page-counter">
            <span id="currentPage">1</span> / <span id="totalPages">9</span>
        </div>
    </div>

    <!-- صفحة الأسئلة -->
    <div id="quiz-page" class="quiz-page">
        <!-- زر التحكم بصوت الأسئلة -->
        <button class="audio-control quiz-audio-btn" id="quizAudioBtn" onclick="toggleQuizAudio()">
            <i class="fas fa-volume-up" id="quizAudioIcon"></i>
        </button>

        <div class="quiz-container" id="quizContainer">
            <!-- سيتم ملء الأسئلة ديناميكياً -->
        </div>
    </div>

    <script src="stories-data.js?v=3"></script>
    <script src="story-script-dynamic.js?v=3"></script>

    <!-- حماية الصفحات من النسخ والكليك يمين وF12 -->
    <script>
        // منع الكليك يمين
        document.addEventListener('contextmenu', function (e) {
            e.preventDefault();
            return false;
        });

        // منع اختصارات لوحة المفاتيح (Ctrl+C, Ctrl+V, Ctrl+A, Ctrl+S, Ctrl+P, F12, Ctrl+Shift+I, Ctrl+Shift+J, Ctrl+U)
        document.addEventListener('keydown', function (e) {
            // منع F12
            if (e.key === 'F12' || e.keyCode === 123) {
                e.preventDefault();
                return false;
            }

            // منع Ctrl+Shift+I (DevTools)
            if (e.ctrlKey && e.shiftKey && e.key === 'I') {
                e.preventDefault();
                return false;
            }

            // منع Ctrl+Shift+J (Console)
            if (e.ctrlKey && e.shiftKey && e.key === 'J') {
                e.preventDefault();
                return false;
            }

            // منع Ctrl+Shift+C (Inspect Element)
            if (e.ctrlKey && e.shiftKey && e.key === 'C') {
                e.preventDefault();
                return false;
            }

            // منع Ctrl+U (View Source)
            if (e.ctrlKey && e.key === 'u') {
                e.preventDefault();
                return false;
            }

            // منع Ctrl+S (Save)
            if (e.ctrlKey && e.key === 's') {
                e.preventDefault();
                return false;
            }

            // منع Ctrl+P (Print) - لكن سنسمح به من خلال زر الطباعة
            // if (e.ctrlKey && e.key === 'p') {
            //     e.preventDefault();
            //     return false;
            // }
        });

        // منع النسخ واللصق
        document.addEventListener('copy', function (e) {
            e.clipboardData.setData('text/plain', '');
            e.preventDefault();
            return false;
        });

        document.addEventListener('cut', function (e) {
            e.clipboardData.setData('text/plain', '');
            e.preventDefault();
            return false;
        });

        // منع السحب والإفلات
        document.addEventListener('dragstart', function (e) {
            e.preventDefault();
            return false;
        });

        // منع اختيار النص (اختياري - يمكن تعطيله إذا أردت)
        document.addEventListener('selectstart', function (e) {
            // يمكنك تعطيل هذا السطر إذا أردت السماح باختيار النص
            // e.preventDefault();
        });

        // منع فتح DevTools من خلال اختصارات أخرى
        let devtools = { open: false, orientation: null };
        setInterval(function () {
            if (window.outerHeight - window.innerHeight > 200 || window.outerWidth - window.innerWidth > 200) {
                if (!devtools.open) {
                    devtools.open = true;
                    // يمكنك إضافة إجراء هنا مثل إعادة توجيه المستخدم
                }
            } else {
                devtools.open = false;
            }
        }, 500);
    </script>

    <style>
        /* منع اختيار النص (اختياري) */
        body {
            -webkit-user-select: none;
            -moz-user-select: none;
            -ms-user-select: none;
            user-select: none;
        }

        /* السماح باختيار النص في حقول الإدخال */
        input,
        textarea {
            -webkit-user-select: text;
            -moz-user-select: text;
            -ms-user-select: text;
            user-select: text;
        }
    </style>
</body>

</html>